

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>video_processing_toolkit.utils.perform_image_operation &mdash; Video Processing Toolkit 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=01f34227"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="video_processing_toolkit.utils.perform_video_operation" href="../perform_video_operation/index.html" />
    <link rel="prev" title="video_processing_toolkit.utils.perform_color_processing" href="../perform_color_processing/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Video Processing Toolkit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../readme.html">Video Processing Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">video_processing_toolkit</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../cli/index.html">video_processing_toolkit.cli</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../core/index.html">video_processing_toolkit.core</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">video_processing_toolkit.utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../visualization/index.html">video_processing_toolkit.visualization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#package-contents">Package Contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../history.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Video Processing Toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">video_processing_toolkit</a></li>
          <li class="breadcrumb-item"><a href="../index.html">video_processing_toolkit.utils</a></li>
      <li class="breadcrumb-item active">video_processing_toolkit.utils.perform_image_operation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/autoapi/video_processing_toolkit/utils/perform_image_operation/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-video_processing_toolkit.utils.perform_image_operation">
<span id="video-processing-toolkit-utils-perform-image-operation"></span><h1>video_processing_toolkit.utils.perform_image_operation<a class="headerlink" href="#module-video_processing_toolkit.utils.perform_image_operation" title="Link to this heading"></a></h1>
<p>This module exposes the image processing methods as module level global
variables, that are loaded based on user defined flags.</p>
<p>Since there are multiple different implementations and libraries available for each
of the image tasks we want to perform (e.g ‘load jpeg’ and ‘resize’), we give the
user the choice of using different versions of each function without changing
the rest of the code. One example in which one would use a ‘safe’ flag is if
there are non jpeg images in the dataset, as imageio.imread can read them,
but not jpeg4py.</p>
<p>The basic changes introduced here are the libjpeg-turbo which is a instruction
level parallel (SSE, AVX, etc) implementation of the default C++ jpeg lib
libjpeg. Morover we also switched the default Pillow for a fork called PIL-SIMD,
which is identical in terms of the API but uses vectorized instructions as well
as heavy loop unrolling to optimize some of Pillows functions (particularly the
resize function). Since the PIL-SIMD is a drop-in replacement for Pillow, even
if the SIMD version is not installed the program should work just as fine with
the default Pillow (without the massive speed gains, though).</p>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading"></a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.LIBJPEG_TURBO_PRESENT">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">LIBJPEG_TURBO_PRESENT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#LIBJPEG_TURBO_PRESENT"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.LIBJPEG_TURBO_PRESENT" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.VALID_FLAGS">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">VALID_FLAGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['fast',</span> <span class="pre">'safe']</span></em><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#VALID_FLAGS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.VALID_FLAGS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.PIL_FLAGS">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">PIL_FLAGS</span></span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#PIL_FLAGS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.PIL_FLAGS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.decode_jpeg_fast">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">decode_jpeg_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#decode_jpeg_fast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.decode_jpeg_fast" title="Link to this definition"></a></dt>
<dd><p>Decodes a JPEG image from the specified file path using the jpeg4py library.</p>
<p>This method leverages Jpeg decoding method implemented by jpeg4py, available in
<a class="reference external" href="https://github.com/ajkxyz/jpeg4py">https://github.com/ajkxyz/jpeg4py</a> . This library binds the libjpeg-turbo
C++ library (available in
<a class="reference external" href="https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/BUILDING.md">https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/BUILDING.md</a>),
and can be up to 9 times faster than the non SIMD implementation.
Requires libjpeg-turbo, built and installed correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>img_path</strong> (<em>str</em>) – The file path to the JPEG image to be decoded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The decoded image as a NumPy array in the format (H, W, C).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the specified image path does not exist.</p></li>
<li><p><strong>RuntimeError</strong> – If the decoding process fails (e.g., corrupted image).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.get_decode_jpeg_fcn">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">get_decode_jpeg_fcn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fast'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#get_decode_jpeg_fcn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.get_decode_jpeg_fcn" title="Link to this definition"></a></dt>
<dd><p>Returns the appropriate JPEG decoding function based on the specified flag.</p>
<p>This method yields the function demanded by the user based on the flags given and
the system responses to imports. If the demanded function is not
available an exception is raised and the user is informed it should try
using another flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flag</strong> (<em>str</em>) – The desired decoding mode. Must be either:
- ‘fast’: Uses <cite>decode_jpeg_fast</cite> (requires libjpeg-turbo).
- ‘safe’: Uses <cite>imageio.imread</cite> for standard decoding.
Default is ‘fast’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The selected decoding function (<cite>decode_jpeg_fast</cite> or <cite>imageio.imread</cite>).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>function</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>AssertionError</strong> – If the flag is set to ‘fast’ but <cite>libjpeg-turbo</cite> is not available.</p></li>
<li><p><a class="reference internal" href="../exceptions/index.html#video_processing_toolkit.utils.exceptions.InvalidOption" title="video_processing_toolkit.utils.exceptions.InvalidOption"><strong>InvalidOption</strong></a> – If the provided flag is not valid. Valid options are:
- ‘fast’
- ‘safe’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.resize_fast">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">resize_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_tup</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bilinear'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#resize_fast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.resize_fast" title="Link to this definition"></a></dt>
<dd><p>Implements the PIL resize method from a numpy image input, using the
same interface as the scipy imresize method.
OBS: if concerned with the resizing of the correlation score map, the
default behavior of the PIL resize is to align the corners, so we can
simply use resize(img, (129,129)) without any problems. The center pixel
is kept in the center (at least for the 4x upscale) and the corner pixels
aligned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>numpy.ndarray</em>) – A numpy RGB image.</p></li>
<li><p><strong>size_tup</strong> (<em>tuple</em>) – A 2D tuple containing the height and weight of the
resized image.</p></li>
<li><p><strong>interp</strong> (<em>str</em>) – The flag indicating the interpolation method. Available
methods include ‘bilinear’, ‘bicubic’ and ‘nearest’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The resized image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.get_resize_fcn">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">get_resize_fcn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fast'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#get_resize_fcn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.get_resize_fcn" title="Link to this definition"></a></dt>
<dd><p>Returns the appropriate image resizing function based on the specified flag.</p>
<p>This method yields the resize function demanded by the user based on the flags given
and the system responses to imports. If the demanded function is not
available an exception is raised and the user is informed it should try
using another flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flag</strong> (<em>str</em>) – The desired resizing mode. Must be either:
- ‘fast’: Uses <cite>resize_fast</cite>, optimized for speed.
- ‘safe’: Uses <cite>resize</cite>, optimized for compatibility.
Default is ‘fast’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The selected resizing function (<cite>resize_fast</cite> or <cite>resize</cite>).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>function</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../exceptions/index.html#video_processing_toolkit.utils.exceptions.InvalidOption" title="video_processing_toolkit.utils.exceptions.InvalidOption"><strong>InvalidOption</strong></a> – If the provided flag is not valid. Valid options are:
- ‘fast’
- ‘safe’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.pad_image">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">pad_image</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#pad_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.pad_image" title="Link to this definition"></a></dt>
<dd><p>Factory function to generate pads dictionaries with the placeholders for
the amount of padding in each direction of an image. Note: the ‘up’ direction
is up in relation to the displayed image, thus it represent the negative
direction of the y indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The padding in each direction.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.crop_img">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">crop_img</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#crop_img"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.crop_img" title="Link to this definition"></a></dt>
<dd><p>Crops an image given its center and the side of the crop region.
If the crop exceeds the size of the image, it calculates how much padding
it should have in each one of the four sides. In the case that the bounding
box has an even number of pixels in either dimension we approach the center
of the bounding box as the floor in each dimension, which may displace the
actual center half a pixel in each dimension. This way we always deal with
bounding boxes of odd size in each dimension. Furthermore, we add the same
amount of context region in every direction, which makes the effective
region size always an odd integer as well, so to enforce this approach we
require the region size to be an odd integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>numpy.ndarray</em>) – The image to be cropped. Must be of dimensions
[height, width, channels]</p></li>
<li><p><strong>cy</strong> (<em>int</em>) – The y coordinate of the center of the target.</p></li>
<li><p><strong>cx</strong> (<em>int</em>) – The x coordinate of the center of the target.</p></li>
<li><p><strong>reg_s</strong> (<em>int</em>) – The side of the square region around the target, in pixels. Must
be an odd integer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>The cropped image.
dictionary: A dictionary with the amount of padding in pixels in</p>
<blockquote>
<div><p>each side. The order is: up, down, left, right, or it can be accessed by their names, e.g.: pads[‘up’]</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.resize_and_pad">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">resize_and_pad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cropped_img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_sz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pads</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_avg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_fcn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">resize</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#resize_and_pad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.resize_and_pad" title="Link to this definition"></a></dt>
<dd><p>Resizes and pads the cropped image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cropped_img</strong> (<em>numpy.ndarray</em>) – The cropped image</p></li>
<li><p><strong>out_sz</strong> (<em>int</em>) – Output size, the desired size of the output</p></li>
<li><p><strong>pads</strong> (<em>dictionary</em>) – A dictionary of the amount of pad in each side of the
cropped image. They can be accessed by their names, e.g.: pads[‘up’]</p></li>
<li><p><strong>reg_s</strong> (<em>int</em>) – Optional: The region side, used to check that the crop size
plus the padding amount is equal to the region side in each axis</p></li>
<li><p><strong>use_avg</strong> (<em>bool</em>) – Indicates the mode of padding employed. If True, the
image is padded with the mean value, else it is padded with zeroes</p></li>
<li><p><strong>resize_fcn</strong> – The image resize function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The output image, resized and padded. Has size</dt><dd><p>(out_sz, out_sz).</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.crop_and_resize">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">crop_and_resize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">cv2.BORDER_CONSTANT</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">cv2.INTER_LINEAR</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#crop_and_resize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.crop_and_resize" title="Link to this definition"></a></dt>
<dd><p>Crops a square region from the image centered at the specified coordinates
and resizes it to the desired output size. If the region exceeds the image
boundaries, padding is applied with the specified border type and color.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>numpy.ndarray</em>) – The input image to be cropped and resized.</p></li>
<li><p><strong>center</strong> (<em>tuple</em>) – (x, y) coordinates of the center of the cropping region.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – The size of the square region to crop around the center.</p></li>
<li><p><strong>out_size</strong> (<em>int</em>) – The size of the output cropped region after resizing.</p></li>
<li><p><strong>border_type</strong> (<em>int</em><em>, </em><em>optional</em>) – The type of border to add if padding is required.
Default is <cite>cv2.BORDER_CONSTANT</cite>.</p></li>
<li><p><strong>border_value</strong> (<em>tuple</em><em>, </em><em>optional</em>) – RGB color to use for padding if BORDER_CONSTANT is used.
Default is black (0, 0, 0).</p></li>
<li><p><strong>interp</strong> (<em>int</em><em>, </em><em>optional</em>) – Interpolation method for resizing.
Default is <cite>cv2.INTER_LINEAR</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The cropped and resized patch of the image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.pad_frame">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">pad_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_sz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patch_sz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_avg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#pad_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.pad_frame" title="Link to this definition"></a></dt>
<dd><p>Pads a frame equally on all sides, enough to fit a region of size
patch_sz centered in (pos_x, pos_y). If the region is already inside the
frame, it doesn’t do anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>numpy.ndarray</em>) – The image to be padded</p></li>
<li><p><strong>frame_sz</strong> (<em>tuple</em>) – The width and height of the frame in pixels.</p></li>
<li><p><strong>pos_x</strong> (<em>int</em>) – The x coordinate of the center of the target in the frame.</p></li>
<li><p><strong>pos_y</strong> (<em>int</em>) – The y coordinate of the center of the target in the frame.</p></li>
<li><p><strong>path_sz</strong> (<em>int</em>) – The size of the patch corresponding to the context
region around the bounding box.</p></li>
<li><p><strong>use_avg</strong> (<em>bool</em>) – Indicates if we should pad with the mean value of the
pixels in the image (True) or zero (False).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The image after the padding.
int: The amount of padding applied.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.extract_crops_z">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">extract_crops_z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_dst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#extract_crops_z"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.extract_crops_z" title="Link to this definition"></a></dt>
<dd><p>Extracts the reference patch from the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>numpy.ndarray</em>) – The padded image.</p></li>
<li><p><strong>npad</strong> (<em>int</em>) – The amount of padding added to each side.</p></li>
<li><p><strong>pos_x</strong> (<em>int</em>) – The x coordinate of the center of the reference in the
original frame, not considering the padding.</p></li>
<li><p><strong>pos_y</strong> (<em>int</em>) – The y coordinate of the center of the reference in the
original frame, not considering the padding.</p></li>
<li><p><strong>sz_src</strong> (<em>int</em>) – The original size of the reference patch.</p></li>
<li><p><strong>sz_dst</strong> (<em>int</em>) – The final size of the patch (usually 127).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The cropped image containing the reference with its context region.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.extract_crops_x">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">extract_crops_x</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_src0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_src1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_src2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sz_dst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#extract_crops_x"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.extract_crops_x" title="Link to this definition"></a></dt>
<dd><p>Extracts the 3 scaled crops of the search patch from the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>numpy.ndarray</em>) – The padded image.</p></li>
<li><p><strong>npad</strong> (<em>int</em>) – The amount of padding added to each side.</p></li>
<li><p><strong>pos_x</strong> (<em>int</em>) – The x coordinate of the center of the bounding box in the
original frame, not considering the padding.</p></li>
<li><p><strong>pos_y</strong> (<em>int</em>) – The y coordinate of the center of the bounding box in the
original frame, not considering the padding.</p></li>
<li><p><strong>sz_src0</strong> (<em>int</em>) – The downscaled size of the search region.</p></li>
<li><p><strong>sz_src1</strong> (<em>int</em>) – The original size of the search region.</p></li>
<li><p><strong>sz_src2</strong> (<em>int</em>) – The upscaled size of the search region.</p></li>
<li><p><strong>sz_dst</strong> (<em>int</em>) – The final size for each crop (usually 255)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The 3 cropped images containing the search region in 3 different scales.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.read_image">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">read_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvt_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">cv2.COLOR_BGR2RGB</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#read_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.read_image" title="Link to this definition"></a></dt>
<dd><p>Reads an image from the specified file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_file</strong> (<em>str</em>) – The path to the image file.</p></li>
<li><p><strong>cvt_code</strong> (<em>int</em>) – OpenCV color conversion code.
Default is <cite>cv2.COLOR_BGR2RGB</cite>, which converts BGR to RGB.
Use <cite>None</cite> if no conversion is required.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The image read and optionally converted.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="video_processing_toolkit.utils.perform_image_operation.show_image">
<span class="sig-prename descclassname"><span class="pre">video_processing_toolkit.utils.perform_image_operation.</span></span><span class="sig-name descname"><span class="pre">show_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ltwh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig_n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">visualize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvt_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">cv2.COLOR_RGB2BGR</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/video_processing_toolkit/utils/perform_image_operation.html#show_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#video_processing_toolkit.utils.perform_image_operation.show_image" title="Link to this definition"></a></dt>
<dd><p>Displays an image with optional bounding boxes. The image is resized if its
dimensions exceed 960 pixels. Bounding boxes can be drawn in either ‘ltwh’
(left, top, width, height) or ‘ltrb’ (left, top, right, bottom) format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>numpy.ndarray</em>) – The image to display.</p></li>
<li><p><strong>boxes</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em><em>, </em><em>optional</em>) – List of bounding boxes to draw.</p></li>
<li><p><strong>box_fmt</strong> (<em>str</em><em>, </em><em>optional</em>) – Format of bounding boxes, ‘ltwh’ or ‘ltrb’. Default is ‘ltwh’.</p></li>
<li><p><strong>colors</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em><em>, </em><em>optional</em>) – List of colors for each box.</p></li>
<li><p><strong>thickness</strong> (<em>int</em><em>, </em><em>optional</em>) – Thickness of the bounding box lines.</p></li>
<li><p><strong>fig_n</strong> (<em>int</em><em>, </em><em>optional</em>) – Window number for OpenCV display.</p></li>
<li><p><strong>delay</strong> (<em>int</em><em>, </em><em>optional</em>) – Delay in milliseconds for <cite>cv2.waitKey</cite>. Default is 1 ms.</p></li>
<li><p><strong>visualize</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, the image is displayed with OpenCV.</p></li>
<li><p><strong>cvt_code</strong> (<em>int</em><em>, </em><em>optional</em>) – Color conversion code. Default is RGB to BGR.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The image with bounding boxes drawn.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../perform_color_processing/index.html" class="btn btn-neutral float-left" title="video_processing_toolkit.utils.perform_color_processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../perform_video_operation/index.html" class="btn btn-neutral float-right" title="video_processing_toolkit.utils.perform_video_operation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Alyssia Fourali, Loic Scoth, Mohamed Said Aimen Lamri, Gaspar Henniaux.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>